<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>È•ÆÈ£üËÆ∞ÂΩï - ‰ªäÊó•</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;600;700&family=Noto+Serif+SC:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
        }
        .hero-title {
            font-family: 'Noto Serif SC', serif;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .progress-bar {
            background: linear-gradient(90deg, #10b981 0%, #059669 100%);
        }
        .food-item {
            transition: all 0.3s ease;
        }
        .food-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        .nav-tab {
            transition: all 0.3s ease;
        }
        .nav-tab.active {
            background: #10b981;
            color: white;
        }
        .floating-btn {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            box-shadow: 0 8px 25px rgba(249, 115, 22, 0.3);
        }
        .floating-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(249, 115, 22, 0.4);
        }
        .meal-card {
            background: linear-gradient(135deg, #ffffff 0%, #f9fafb 100%);
            border: 1px solid #e5e7eb;
        }
        .stats-card {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Main Content -->
    <div class="px-4 py-6 pb-20">
        <!-- Date Navigation -->
        <div class="glass-card rounded-2xl p-4 mb-6 shadow-lg">
            <div class="flex items-center justify-between mb-3">
                <button id="prevDate" class="p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                <div class="text-center">
                    <div class="text-lg font-semibold text-gray-800" id="currentDate">‰ªäÂ§© ¬∑ 12Êúà11Êó•</div>
                    <div class="text-sm text-gray-500" id="currentPlan">ÂΩìÂâçËÆ°ÂàíÔºö6Âë®ÂáèËÑÇËÆ°Âàí</div>
                </div>
                <button id="nextDate" class="p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Daily Goals Overview -->
        <div class="glass-card rounded-2xl p-4 mb-6 shadow-lg">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">‰ªäÊó•ÁõÆÊ†á</h3>
            <div class="grid grid-cols-2 gap-4">
                <div class="text-center">
                    <div class="text-2xl font-bold text-emerald-600" id="calorieGoal">1800</div>
                    <div class="text-xs text-gray-500">ÁõÆÊ†áÁÉ≠Èáè (kcal)</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold text-orange-500" id="calorieConsumed">1450</div>
                    <div class="text-xs text-gray-500">Â∑≤ÊëÑÂÖ• (kcal)</div>
                </div>
            </div>
            <div class="mt-4">
                <div class="flex justify-between text-sm text-gray-600 mb-1">
                    <span>ËõãÁôΩË¥®</span>
                    <span id="proteinText">90 / 120g</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div class="progress-bar h-2 rounded-full" style="width: 75%" id="proteinBar"></div>
                </div>
            </div>
            <div class="mt-3">
                <div class="flex justify-between text-sm text-gray-600 mb-1">
                    <span>ËÑÇËÇ™</span>
                    <span id="fatText">40 / 50g</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div class="progress-bar h-2 rounded-full" style="width: 80%" id="fatBar"></div>
                </div>
            </div>
            <div class="mt-3">
                <div class="flex justify-between text-sm text-gray-600 mb-1">
                    <span>Á¢≥Ê∞¥ÂåñÂêàÁâ©</span>
                    <span id="carbText">160 / 180g</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div class="progress-bar h-2 rounded-full" style="width: 89%" id="carbBar"></div>
                </div>
            </div>
        </div>

        <!-- Meal Records -->
        <div class="space-y-4 mb-6">
            <!-- Breakfast -->
            <div class="meal-card rounded-2xl p-4 shadow-sm">
                <div class="flex items-center justify-between mb-3">
                    <h4 class="font-semibold text-gray-800">üåÖ Êó©È§ê</h4>
                    <div class="flex items-center space-x-3">
                        <div class="text-sm text-gray-600">üçû 62g</div>
                        <div class="text-sm text-gray-600">ü•© 15g</div>
                        <div class="text-sm text-gray-600">ü•ë 11g</div>
                        <div class="text-sm text-gray-500">320 kcal</div>
                    </div>
                </div>
                <div class="space-y-2" id="breakfastItems">
                    <div class="food-item flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                        <div>
                            <div class="font-medium text-gray-800">ÁáïÈ∫¶Á≤•</div>
                            <div class="text-xs text-gray-500">50g</div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-600">180 kcal</span>
                            <button class="text-gray-400 hover:text-gray-600" onclick="editFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button class="text-red-400 hover:text-red-600" onclick="deleteFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="food-item flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                        <div>
                            <div class="font-medium text-gray-800">ÁâõÂ•∂</div>
                            <div class="text-xs text-gray-500">200ml</div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-600">120 kcal</span>
                            <button class="text-gray-400 hover:text-gray-600" onclick="editFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button class="text-red-400 hover:text-red-600" onclick="deleteFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="food-item flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                        <div>
                            <div class="font-medium text-gray-800">È¶ôËïâ</div>
                            <div class="text-xs text-gray-500">1Ê†π</div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-600">80 kcal</span>
                            <button class="text-gray-400 hover:text-gray-600" onclick="editFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button class="text-red-400 hover:text-red-600" onclick="deleteFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="mt-3 flex space-x-2">
                    <button class="flex-1 bg-emerald-100 text-emerald-700 px-3 py-2 rounded-lg text-sm font-medium hover:bg-emerald-200 transition-colors" onclick="recordMeal('breakfast')">
                        ÊåâËÆ°ÂàíËÆ∞ÂΩïÊú¨È§ê
                    </button>
                    <button class="flex-1 bg-gray-100 text-gray-700 px-3 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors" onclick="addFoodItem('breakfast')">
                        + Ê∑ªÂä†È£üÁâ©
                    </button>
                </div>
            </div>

            <!-- Lunch -->
            <div class="meal-card rounded-2xl p-4 shadow-sm">
                <div class="flex items-center justify-between mb-3">
                    <h4 class="font-semibold text-gray-800">‚òÄÔ∏è ÂçàÈ§ê</h4>
                    <div class="flex items-center space-x-3">
                        <div class="text-sm text-gray-600">üçû 37g</div>
                        <div class="text-sm text-gray-600">ü•© 52g</div>
                        <div class="text-sm text-gray-600">ü•ë 20g</div>
                        <div class="text-sm text-gray-500">580 kcal</div>
                    </div>
                </div>
                <div class="space-y-2" id="lunchItems">
                    <div class="food-item flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                        <div>
                            <div class="font-medium text-gray-800">È∏°ËÉ∏ËÇâ</div>
                            <div class="text-xs text-gray-500">150g</div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-600">250 kcal</span>
                            <button class="text-gray-400 hover:text-gray-600" onclick="editFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button class="text-red-400 hover:text-red-600" onclick="deleteFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="food-item flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                        <div>
                            <div class="font-medium text-gray-800">Á≥ôÁ±≥È•≠</div>
                            <div class="text-xs text-gray-500">100g</div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-600">180 kcal</span>
                            <button class="text-gray-400 hover:text-gray-600" onclick="editFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button class="text-red-400 hover:text-red-600" onclick="deleteFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="food-item flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                        <div>
                            <div class="font-medium text-gray-800">Ë•øÂÖ∞Ëä±</div>
                            <div class="text-xs text-gray-500">100g</div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-600">35 kcal</span>
                            <button class="text-gray-400 hover:text-gray-600" onclick="editFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button class="text-red-400 hover:text-red-600" onclick="deleteFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="food-item flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                        <div>
                            <div class="font-medium text-gray-800">ËÉ°ËêùÂçú</div>
                            <div class="text-xs text-gray-500">80g</div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-600">30 kcal</span>
                            <button class="text-gray-400 hover:text-gray-600" onclick="editFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button class="text-red-400 hover:text-red-600" onclick="deleteFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="food-item flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                        <div>
                            <div class="font-medium text-gray-800">Ê©ÑÊ¶ÑÊ≤π</div>
                            <div class="text-xs text-gray-500">1Âã∫</div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-600">85 kcal</span>
                            <button class="text-gray-400 hover:text-gray-600" onclick="editFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button class="text-red-400 hover:text-red-600" onclick="deleteFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="mt-3 flex space-x-2">
                    <button class="flex-1 bg-emerald-100 text-emerald-700 px-3 py-2 rounded-lg text-sm font-medium hover:bg-emerald-200 transition-colors" onclick="recordMeal('lunch')">
                        ÊåâËÆ°ÂàíËÆ∞ÂΩïÊú¨È§ê
                    </button>
                    <button class="flex-1 bg-gray-100 text-gray-700 px-3 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors" onclick="addFoodItem('lunch')">
                        + Ê∑ªÂä†È£üÁâ©
                    </button>
                </div>
            </div>

            <!-- Dinner -->
            <div class="meal-card rounded-2xl p-4 shadow-sm">
                <div class="flex items-center justify-between mb-3">
                    <h4 class="font-semibold text-gray-800">üåô ÊôöÈ§ê</h4>
                    <div class="flex items-center space-x-3">
                        <div class="text-sm text-gray-600">üçû 25g</div>
                        <div class="text-sm text-gray-600">ü•© 37g</div>
                        <div class="text-sm text-gray-600">ü•ë 24g</div>
                        <div class="text-sm text-gray-500">450 kcal</div>
                    </div>
                </div>
                <div class="space-y-2" id="dinnerItems">
                    <div class="food-item flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                        <div>
                            <div class="font-medium text-gray-800">‰∏âÊñáÈ±º</div>
                            <div class="text-xs text-gray-500">120g</div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-600">280 kcal</span>
                            <button class="text-gray-400 hover:text-gray-600" onclick="editFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button class="text-red-400 hover:text-red-600" onclick="deleteFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="food-item flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                        <div>
                            <div class="font-medium text-gray-800">Ëí∏Ëõã</div>
                            <div class="text-xs text-gray-500">2‰∏™</div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-600">140 kcal</span>
                            <button class="text-gray-400 hover:text-gray-600" onclick="editFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button class="text-red-400 hover:text-red-600" onclick="deleteFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="food-item flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                        <div>
                            <div class="font-medium text-gray-800">Ëè†Ëèú</div>
                            <div class="text-xs text-gray-500">100g</div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-600">25 kcal</span>
                            <button class="text-gray-400 hover:text-gray-600" onclick="editFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button class="text-red-400 hover:text-red-600" onclick="deleteFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="food-item flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                        <div>
                            <div class="font-medium text-gray-800">Á¥´ËñØ</div>
                            <div class="text-xs text-gray-500">100g</div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-600">85 kcal</span>
                            <button class="text-gray-400 hover:text-gray-600" onclick="editFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button class="text-red-400 hover:text-red-600" onclick="deleteFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="mt-3 flex space-x-2">
                    <button class="flex-1 bg-emerald-100 text-emerald-700 px-3 py-2 rounded-lg text-sm font-medium hover:bg-emerald-200 transition-colors" onclick="recordMeal('dinner')">
                        ÊåâËÆ°ÂàíËÆ∞ÂΩïÊú¨È§ê
                    </button>
                    <button class="flex-1 bg-gray-100 text-gray-700 px-3 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors" onclick="addFoodItem('dinner')">
                        + Ê∑ªÂä†È£üÁâ©
                    </button>
                </div>
            </div>

            <!-- Snacks -->
            <div class="meal-card rounded-2xl p-4 shadow-sm">
                <div class="flex items-center justify-between mb-3">
                    <h4 class="font-semibold text-gray-800">üçé Âä†È§ê</h4>
                    <div class="flex items-center space-x-3">
                        <div class="text-sm text-gray-600">üçû 10g</div>
                        <div class="text-sm text-gray-600">ü•© 6g</div>
                        <div class="text-sm text-gray-600">ü•ë 6g</div>
                        <div class="text-sm text-gray-500">100 kcal</div>
                    </div>
                </div>
                <div class="space-y-2" id="snacksItems">
                    <div class="food-item flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                        <div>
                            <div class="font-medium text-gray-800">ÈÖ∏Â•∂</div>
                            <div class="text-xs text-gray-500">150g</div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-600">80 kcal</span>
                            <button class="text-gray-400 hover:text-gray-600" onclick="editFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button class="text-red-400 hover:text-red-600" onclick="deleteFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="food-item flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                        <div>
                            <div class="font-medium text-gray-800">Êùè‰ªÅ</div>
                            <div class="text-xs text-gray-500">10È¢ó</div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-600">20 kcal</span>
                            <button class="text-gray-400 hover:text-gray-600" onclick="editFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button class="text-red-400 hover:text-red-600" onclick="deleteFoodItem(this)">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="mt-3 flex space-x-2">
                    <button class="flex-1 bg-emerald-100 text-emerald-700 px-3 py-2 rounded-lg text-sm font-medium hover:bg-emerald-200 transition-colors" onclick="recordMeal('snacks')">
                        ÊåâËÆ°ÂàíËÆ∞ÂΩïÊú¨È§ê
                    </button>
                    <button class="flex-1 bg-gray-100 text-gray-700 px-3 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors" onclick="addFoodItem('snacks')">
                        + Ê∑ªÂä†È£üÁâ©
                    </button>
                </div>
            </div>
        </div>

    </div>

    <!-- Bottom Navigation -->
    <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2">
        <div class="flex justify-around">
            <a href="index.html" class="nav-tab active flex flex-col items-center py-2 px-3 rounded-lg">
                <svg class="w-5 h-5 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                </svg>
                <span class="text-xs">ËÆ∞ÂΩï</span>
            </a>
            <a href="plan.html" class="nav-tab flex flex-col items-center py-2 px-3 rounded-lg text-gray-600">
                <svg class="w-5 h-5 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                </svg>
                <span class="text-xs">ËÆ°Âàí</span>
            </a>
            <a href="food.html" class="nav-tab flex flex-col items-center py-2 px-3 rounded-lg text-gray-600">
                <svg class="w-5 h-5 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                </svg>
                <span class="text-xs">È£üÊùê</span>
            </a>
            <a href="profile.html" class="nav-tab flex flex-col items-center py-2 px-3 rounded-lg text-gray-600">
                <svg class="w-5 h-5 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                </svg>
                <span class="text-xs">ÊàëÁöÑ</span>
            </a>
        </div>
    </div>

    <!-- Food Selection Modal -->
    <div id="foodModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-end justify-center min-h-screen">
            <div class="bg-white rounded-t-3xl w-full max-w-md p-6 h-[70vh] flex flex-col">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-800">ÈÄâÊã©È£üÁâ©</h3>
                    <button onclick="closeFoodModal()" class="text-gray-400 hover:text-gray-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="mb-4">
                    <input type="text" id="foodSearchInput" placeholder="ÊêúÁ¥¢È£üÁâ©..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent" oninput="filterFoodList()">
                </div>
                <!-- ÂàÜÁ±ªÁ≠õÈÄâ -->
                <div class="flex space-x-2 overflow-x-auto pb-2 mb-4" id="categoryFilters">
                    <button class="category-btn active px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap bg-emerald-100 text-emerald-700" data-category="all">ÂÖ®ÈÉ®</button>
                    <button class="category-btn px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap bg-gray-100 text-gray-600" data-category="grains">‰∏ªÈ£ü</button>
                    <button class="category-btn px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap bg-gray-100 text-gray-600" data-category="protein">ËõãÁôΩË¥®</button>
                    <button class="category-btn px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap bg-gray-100 text-gray-600" data-category="vegetables">Ëî¨Ëèú</button>
                    <button class="category-btn px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap bg-gray-100 text-gray-600" data-category="fruits">Ê∞¥Êûú</button>
                    <button class="category-btn px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap bg-gray-100 text-gray-600" data-category="nuts">ÂùöÊûú</button>
                    <button class="category-btn px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap bg-gray-100 text-gray-600" data-category="dairy">‰π≥Âà∂ÂìÅ</button>
                </div>
                <div class="space-y-2 flex-1 overflow-y-auto" id="foodList">
                    <!-- Food items will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Quantity Input Modal -->
    <div id="quantityModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl w-full max-w-sm p-6">
                <div class="text-center mb-4">
                    <h3 class="text-lg font-semibold text-gray-800">Ê∑ªÂä†È£üÁâ©</h3>
                    <p class="text-sm text-gray-500" id="foodName">È£üÁâ©ÂêçÁß∞</p>
                </div>
                <div class="mb-4 flex items-center">
                    <label class="text-sm font-medium text-gray-700 mr-3 whitespace-nowrap">Êï∞Èáè</label>
                    <div class="flex items-center flex-1">
                        <input type="number" id="foodQuantity" class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent" placeholder="ËØ∑ËæìÂÖ•Êï∞Èáè" value="100">
                        <span class="ml-3 text-sm text-gray-600" id="foodUnitDisplay">g</span>
                    </div>
                </div>
                <!-- Ëê•ÂÖªÊàêÂàÜÈ¢ÑËßà -->
                <div class="bg-gray-50 rounded-lg p-3 mb-4">
                    <div class="text-xs text-gray-500 mb-2">Ëê•ÂÖªÊàêÂàÜÈ¢ÑËßà</div>
                    <div class="grid grid-cols-4 gap-2 text-center">
                        <div>
                            <div class="text-xs text-gray-500">Á¢≥Ê∞¥</div>
                            <div class="text-sm font-medium text-yellow-600" id="addPreviewCarbs">0g</div>
                        </div>
                        <div>
                            <div class="text-xs text-gray-500">ËõãÁôΩË¥®</div>
                            <div class="text-sm font-medium text-red-600" id="addPreviewProtein">0g</div>
                        </div>
                        <div>
                            <div class="text-xs text-gray-500">ËÑÇËÇ™</div>
                            <div class="text-sm font-medium text-blue-600" id="addPreviewFat">0g</div>
                        </div>
                        <div>
                            <div class="text-xs text-gray-500">ËÉΩÈáè</div>
                            <div class="text-sm font-medium text-emerald-600" id="addPreviewCalories">0 kcal</div>
                        </div>
                    </div>
                </div>
                <div class="flex space-x-3">
                    <button onclick="closeQuantityModal()" class="flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors">
                        ÂèñÊ∂à
                    </button>
                    <button onclick="confirmAddFood()" class="flex-1 bg-emerald-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-emerald-700 transition-colors">
                        Á°ÆËÆ§Ê∑ªÂä†
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Food Modal -->
    <div id="editFoodModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl w-full max-w-sm p-6">
                <div class="text-center mb-4">
                    <h3 class="text-lg font-semibold text-gray-800">ÁºñËæëÈ£üÁâ©</h3>
                    <p class="text-sm text-gray-500" id="editFoodName">È£üÁâ©ÂêçÁß∞</p>
                </div>
                <div class="mb-4 flex items-center">
                    <label class="text-sm font-medium text-gray-700 mr-3 whitespace-nowrap">Êï∞Èáè</label>
                    <div class="flex items-center flex-1">
                        <input type="number" id="editFoodQuantity" class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent" placeholder="ËØ∑ËæìÂÖ•Êï∞Èáè" value="100">
                        <span class="ml-3 text-sm text-gray-600" id="editFoodUnitDisplay">g</span>
                    </div>
                </div>
                <!-- Ëê•ÂÖªÊàêÂàÜÈ¢ÑËßà -->
                <div class="bg-gray-50 rounded-lg p-3 mb-4">
                    <div class="text-xs text-gray-500 mb-2">Ëê•ÂÖªÊàêÂàÜÈ¢ÑËßà</div>
                    <div class="grid grid-cols-4 gap-2 text-center">
                        <div>
                            <div class="text-xs text-gray-500">Á¢≥Ê∞¥</div>
                            <div class="text-sm font-medium text-yellow-600" id="previewCarbs">0g</div>
                        </div>
                        <div>
                            <div class="text-xs text-gray-500">ËõãÁôΩË¥®</div>
                            <div class="text-sm font-medium text-red-600" id="previewProtein">0g</div>
                        </div>
                        <div>
                            <div class="text-xs text-gray-500">ËÑÇËÇ™</div>
                            <div class="text-sm font-medium text-blue-600" id="previewFat">0g</div>
                        </div>
                        <div>
                            <div class="text-xs text-gray-500">ËÉΩÈáè</div>
                            <div class="text-sm font-medium text-emerald-600" id="previewCalories">0 kcal</div>
                        </div>
                    </div>
                </div>
                <div class="flex space-x-3">
                    <button onclick="closeEditFoodModal()" class="flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors">
                        ÂèñÊ∂à
                    </button>
                    <button onclick="confirmEditFood()" class="flex-1 bg-emerald-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-emerald-700 transition-colors">
                        Á°ÆËÆ§‰øÆÊîπ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirm Modal -->
    <div id="deleteConfirmModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl w-full max-w-sm p-6">
                <div class="text-center mb-6">
                    <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4">
                        <svg class="h-6 w-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-800">Á°ÆËÆ§Âà†Èô§</h3>
                    <p class="text-sm text-gray-500 mt-2">Á°ÆÂÆöË¶ÅÂà†Èô§ <span id="deleteFoodName" class="font-medium text-gray-800"></span> ÂêóÔºü<br>Ê≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§ç„ÄÇ</p>
                </div>
                <div class="flex space-x-3">
                    <button onclick="closeDeleteConfirmModal()" class="flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors">
                        ÂèñÊ∂à
                    </button>
                    <button onclick="confirmDeleteFood()" class="flex-1 bg-red-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-red-700 transition-colors">
                        Á°ÆËÆ§Âà†Èô§
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Record Meal Confirm Modal -->
    <div id="recordMealConfirmModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl w-full max-w-sm p-6">
                <div class="text-center mb-6">
                    <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-emerald-100 mb-4">
                        <svg class="h-6 w-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-800">ËÆ∞ÂΩïÊú¨È§ê</h3>
                    <p class="text-sm text-gray-500 mt-2">Á°ÆÂÆöË¶ÅËÆ∞ÂΩïÊú¨È§êÂêóÔºü<br>ÂÖ± <span id="recordMealCount" class="font-medium text-gray-800"></span> ‰∏™È£üÁâ©Â∞ÜË¢´Ê†áËÆ∞‰∏∫Â∑≤ËÆ∞ÂΩï„ÄÇ</p>
                </div>
                <div class="flex space-x-3">
                    <button onclick="closeRecordMealConfirmModal()" class="flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors">
                        ÂèñÊ∂à
                    </button>
                    <button onclick="confirmRecordMeal()" class="flex-1 bg-emerald-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-emerald-700 transition-colors">
                        Á°ÆËÆ§ËÆ∞ÂΩï
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Recorded Food Edit Confirm Modal -->
    <div id="recordedEditConfirmModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl w-full max-w-sm p-6">
                <div class="text-center mb-6">
                    <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 mb-4">
                        <svg class="h-6 w-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-800">ÊèêÁ§∫</h3>
                    <p class="text-sm text-gray-500 mt-2">ËØ•È£üÁâ©Â∑≤ËÆ∞ÂΩïÔºåÊõ¥ÊîπÂêéÂ∞Ü‰ºöÊîπ‰∏∫Êú™ËÆ∞ÂΩïÁä∂ÊÄÅ„ÄÇ</p>
                </div>
                <div class="flex space-x-3">
                    <button onclick="closeRecordedEditConfirmModal()" class="flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors">
                        ÂèñÊ∂à
                    </button>
                    <button onclick="confirmRecordedEdit()" class="flex-1 bg-yellow-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-yellow-600 transition-colors">
                        ÁªßÁª≠ÁºñËæë
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // È£üÁâ©Ëê•ÂÖªÊï∞ÊçÆÂ∫ì (ÊØè100g)
        const foodNutritionDB = {
            'ÁáïÈ∫¶Á≤•': { carbs: 60, protein: 12, fat: 6, calories: 360 },
            'ÁâõÂ•∂': { carbs: 4.8, protein: 3.2, fat: 3.2, calories: 54 },
            'È¶ôËïâ': { carbs: 23, protein: 1.1, fat: 0.3, calories: 89 },
            'È∏°ËÉ∏ËÇâ': { carbs: 0, protein: 31, fat: 3.6, calories: 165 },
            'Á≥ôÁ±≥È•≠': { carbs: 23, protein: 2.6, fat: 0.9, calories: 111 },
            'Ë•øÂÖ∞Ëä±': { carbs: 7, protein: 2.8, fat: 0.4, calories: 34 },
            'ËÉ°ËêùÂçú': { carbs: 9.6, protein: 0.9, fat: 0.2, calories: 41 },
            'Ê©ÑÊ¶ÑÊ≤π': { carbs: 0, protein: 0, fat: 100, calories: 884 },
            '‰∏âÊñáÈ±º': { carbs: 0, protein: 20, fat: 13, calories: 208 },
            'Ëí∏Ëõã': { carbs: 0.6, protein: 13, fat: 10, calories: 143 },
            'Ëè†Ëèú': { carbs: 3.6, protein: 2.9, fat: 0.4, calories: 23 },
            'Á¥´ËñØ': { carbs: 20, protein: 1.6, fat: 0.2, calories: 86 },
            'ÈÖ∏Â•∂': { carbs: 4.7, protein: 10, fat: 0.5, calories: 59 },
            'Êùè‰ªÅ': { carbs: 21.6, protein: 21.2, fat: 49.4, calories: 579 },
            'ËãπÊûú': { carbs: 13.8, protein: 0.3, fat: 0.2, calories: 52 },
            'È∏°Ëõã': { carbs: 1, protein: 13, fat: 11, calories: 155 },
            'ÂÖ®È∫¶Èù¢ÂåÖ': { carbs: 41, protein: 13, fat: 4, calories: 247 },
            'ÁâõÊ≤πÊûú': { carbs: 8.5, protein: 2, fat: 14.7, calories: 160 },
            'ËìùËéì': { carbs: 14.5, protein: 0.7, fat: 0.3, calories: 57 },
            'Ê†∏Ê°É': { carbs: 4, protein: 4, fat: 18, calories: 185 }
        };

        // È£üÁâ©ÈÄâÊã©Êï∞ÊçÆÂ∫ì
        const foodDatabase = [
            { name: 'ÁáïÈ∫¶Á≤•', calories: 180, protein: 6, fat: 3, carbs: 30, unit: '50g', category: 'grains' },
            { name: 'ÁâõÂ•∂', calories: 120, protein: 6, fat: 6, carbs: 9, unit: '200ml', category: 'dairy' },
            { name: 'È¶ôËïâ', calories: 80, protein: 1, fat: 0, carbs: 20, unit: '1Ê†π', category: 'fruits' },
            { name: 'È∏°ËÉ∏ËÇâ', calories: 250, protein: 46, fat: 5, carbs: 0, unit: '150g', category: 'protein' },
            { name: 'Á≥ôÁ±≥È•≠', calories: 180, protein: 4, fat: 2, carbs: 36, unit: '100g', category: 'grains' },
            { name: 'Ë•øÂÖ∞Ëä±', calories: 35, protein: 3, fat: 0, carbs: 7, unit: '100g', category: 'vegetables' },
            { name: 'ËÉ°ËêùÂçú', calories: 30, protein: 1, fat: 0, carbs: 7, unit: '80g', category: 'vegetables' },
            { name: 'Ê©ÑÊ¶ÑÊ≤π', calories: 85, protein: 0, fat: 9, carbs: 0, unit: '1Âã∫', category: 'protein' },
            { name: '‰∏âÊñáÈ±º', calories: 280, protein: 25, fat: 18, carbs: 0, unit: '120g', category: 'protein' },
            { name: 'Ëí∏Ëõã', calories: 140, protein: 12, fat: 10, carbs: 1, unit: '2‰∏™', category: 'protein' },
            { name: 'Ëè†Ëèú', calories: 25, protein: 3, fat: 0, carbs: 4, unit: '100g', category: 'vegetables' },
            { name: 'Á¥´ËñØ', calories: 85, protein: 2, fat: 0, carbs: 20, unit: '100g', category: 'grains' },
            { name: 'ÈÖ∏Â•∂', calories: 80, protein: 4, fat: 0, carbs: 12, unit: '150g', category: 'dairy' },
            { name: 'Êùè‰ªÅ', calories: 20, protein: 1, fat: 2, carbs: 1, unit: '10È¢ó', category: 'nuts' },
            { name: 'ËãπÊûú', calories: 52, protein: 0, fat: 0, carbs: 14, unit: '1‰∏™', category: 'fruits' },
            { name: 'È∏°Ëõã', calories: 155, protein: 13, fat: 11, carbs: 1, unit: '2‰∏™', category: 'protein' },
            { name: 'ÂÖ®È∫¶Èù¢ÂåÖ', calories: 120, protein: 4, fat: 2, carbs: 20, unit: '1Áâá', category: 'grains' },
            { name: 'ÁâõÊ≤πÊûú', calories: 160, protein: 2, fat: 15, carbs: 9, unit: 'Âçä‰∏™', category: 'fruits' },
            { name: 'ËìùËéì', calories: 42, protein: 1, fat: 0, carbs: 11, unit: '100g', category: 'fruits' },
            { name: 'Ê†∏Ê°É', calories: 185, protein: 4, fat: 18, carbs: 4, unit: '30g', category: 'nuts' }
        ];

        let currentCategory = 'all';

        // ÂÖ®Â±ÄÂèòÈáè
        let currentMealType = '';
        let currentFoodItem = null;

        // ÁºñËæëÈ£üÁâ©Áõ∏ÂÖ≥
        let currentEditItem = null;
        let currentDeleteItem = null;
        let currentRecordMeal = null;
        let pendingEditBtn = null;

        function editFoodItem(btn) {
            const foodItem = btn.closest('.food-item');
            
            // Ê£ÄÊü•ÊòØÂê¶Â∑≤ËÆ∞ÂΩï
            if (foodItem.classList.contains('recorded')) {
                pendingEditBtn = btn;
                document.getElementById('recordedEditConfirmModal').classList.remove('hidden');
                return;
            }
            
            openEditModal(foodItem);
        }

        function openEditModal(foodItem) {
            currentEditItem = foodItem;
            const foodName = foodItem.querySelector('.font-medium').textContent;
            const quantityText = foodItem.querySelector('.text-xs.text-gray-500').textContent;
            const quantity = parseFloat(quantityText) || 100;
            const unit = quantityText.replace(/[\d.]+/, '');
            
            document.getElementById('editFoodName').textContent = foodName;
            document.getElementById('editFoodQuantity').value = quantity;
            document.getElementById('editFoodUnitDisplay').textContent = unit;
            
            // ÊòæÁ§∫Ëê•ÂÖªÊàêÂàÜÈ¢ÑËßà
            updateNutritionPreview(foodName, quantity);
            
            document.getElementById('editFoodModal').classList.remove('hidden');
        }

        function updateNutritionPreview(foodName, quantity) {
            const nutrition = foodNutritionDB[foodName];
            if (!nutrition) return;
            
            const ratio = quantity / 100;
            const carbs = (nutrition.carbs * ratio).toFixed(1);
            const protein = (nutrition.protein * ratio).toFixed(1);
            const fat = (nutrition.fat * ratio).toFixed(1);
            const calories = Math.round(nutrition.calories * ratio);
            
            document.getElementById('previewCarbs').textContent = carbs + 'g';
            document.getElementById('previewProtein').textContent = protein + 'g';
            document.getElementById('previewFat').textContent = fat + 'g';
            document.getElementById('previewCalories').textContent = calories + ' kcal';
        }

        // ÁõëÂê¨Êï∞ÈáèÂèòÂåñ
        document.getElementById('editFoodQuantity').addEventListener('input', function() {
            const foodName = document.getElementById('editFoodName').textContent;
            const quantity = parseFloat(this.value) || 0;
            updateNutritionPreview(foodName, quantity);
        });

        function closeEditFoodModal() {
            document.getElementById('editFoodModal').classList.add('hidden');
            currentEditItem = null;
        }

        function confirmEditFood() {
            if (!currentEditItem) return;
            
            const foodName = document.getElementById('editFoodName').textContent;
            const quantity = parseFloat(document.getElementById('editFoodQuantity').value) || 0;
            const unitText = document.getElementById('editFoodUnitDisplay').textContent;
            
            // Êõ¥Êñ∞È£üÁâ©È°πÊòæÁ§∫
            currentEditItem.querySelector('.text-xs.text-gray-500').textContent = quantity + unitText;
            
            // Êõ¥Êñ∞Ëê•ÂÖªÊàêÂàÜ
            const nutrition = foodNutritionDB[foodName];
            if (nutrition) {
                const ratio = quantity / 100;
                const calories = Math.round(nutrition.calories * ratio);
                currentEditItem.querySelector('.text-sm.text-gray-600').textContent = calories + ' kcal';
            }
            
            // Êõ¥Êñ∞È§êÂç°ÊÄªËÆ°
            const mealCard = currentEditItem.closest('.meal-card');
            updateMealTotal(mealCard);
            
            // Êõ¥Êñ∞‰ªäÊó•ÁõÆÊ†á
            updateDailyGoals();
            
            closeEditFoodModal();
        }

        function getUnitText(unit) {
            const unitMap = { 'g': 'g', 'ml': 'ml', 'piece': '‰∏™', 'cup': 'ÊùØ', 'tbsp': 'Âã∫' };
            return unitMap[unit] || unit;
        }

        // Êõ¥Êñ∞‰ªäÊó•ÁõÆÊ†á
        function updateDailyGoals() {
            let totalCarbs = 0, totalProtein = 0, totalFat = 0, totalCalories = 0;
            
            document.querySelectorAll('.food-item').forEach(item => {
                const foodName = item.querySelector('.font-medium').textContent;
                const quantityText = item.querySelector('.text-xs.text-gray-500').textContent;
                const quantity = parseFloat(quantityText) || 0;
                
                const nutrition = foodNutritionDB[foodName];
                if (nutrition) {
                    const ratio = quantity / 100;
                    totalCarbs += nutrition.carbs * ratio;
                    totalProtein += nutrition.protein * ratio;
                    totalFat += nutrition.fat * ratio;
                    totalCalories += nutrition.calories * ratio;
                }
            });
            
            // Êõ¥Êñ∞Â∑≤ÊëÑÂÖ•ÁÉ≠Èáè
            document.getElementById('calorieConsumed').textContent = Math.round(totalCalories);
            
            // Êõ¥Êñ∞ËøõÂ∫¶Êù°
            const carbGoal = 180, proteinGoal = 120, fatGoal = 50;
            const carbPercent = Math.min((totalCarbs / carbGoal) * 100, 100);
            const proteinPercent = Math.min((totalProtein / proteinGoal) * 100, 100);
            const fatPercent = Math.min((totalFat / fatGoal) * 100, 100);
            
            document.getElementById('carbText').textContent = `${Math.round(totalCarbs)} / ${carbGoal}g`;
            document.getElementById('carbBar').style.width = carbPercent + '%';
            
            document.getElementById('proteinText').textContent = `${Math.round(totalProtein)} / ${proteinGoal}g`;
            document.getElementById('proteinBar').style.width = proteinPercent + '%';
            
            document.getElementById('fatText').textContent = `${Math.round(totalFat)} / ${fatGoal}g`;
            document.getElementById('fatBar').style.width = fatPercent + '%';
        }

        // Âà†Èô§È£üÁâ©Áõ∏ÂÖ≥
        function deleteFoodItem(btn) {
            currentDeleteItem = btn.closest('.food-item');
            const foodName = currentDeleteItem.querySelector('.font-medium').textContent;
            document.getElementById('deleteFoodName').textContent = foodName;
            document.getElementById('deleteConfirmModal').classList.remove('hidden');
        }

        function closeDeleteConfirmModal() {
            document.getElementById('deleteConfirmModal').classList.add('hidden');
            currentDeleteItem = null;
        }

        function confirmDeleteFood() {
            if (currentDeleteItem) {
                const mealCard = currentDeleteItem.closest('.meal-card');
                currentDeleteItem.remove();
                updateMealTotal(mealCard);
                updateDailyGoals();
            }
            closeDeleteConfirmModal();
        }

        // Êõ¥Êñ∞È§êÂç°ÊÄªËÆ°
        function updateMealTotal(mealCard) {
            let totalCarbs = 0, totalProtein = 0, totalFat = 0, totalCalories = 0;
            
            mealCard.querySelectorAll('.food-item').forEach(item => {
                const foodName = item.querySelector('.font-medium').textContent;
                const quantityText = item.querySelector('.text-xs.text-gray-500').textContent;
                const quantity = parseFloat(quantityText) || 0;
                
                const nutrition = foodNutritionDB[foodName];
                if (nutrition) {
                    const ratio = quantity / 100;
                    totalCarbs += nutrition.carbs * ratio;
                    totalProtein += nutrition.protein * ratio;
                    totalFat += nutrition.fat * ratio;
                    totalCalories += nutrition.calories * ratio;
                }
            });
            
            // Êõ¥Êñ∞È§êÂç°Ê†áÈ¢òÊ†è
            const headerDiv = mealCard.querySelector('.flex.items-center.justify-between.mb-3 > div:last-child');
            if (headerDiv) {
                headerDiv.innerHTML = `
                    <div class="text-sm text-gray-600">üçû ${Math.round(totalCarbs)}g</div>
                    <div class="text-sm text-gray-600">ü•© ${Math.round(totalProtein)}g</div>
                    <div class="text-sm text-gray-600">ü•ë ${Math.round(totalFat)}g</div>
                    <div class="text-sm text-gray-500">${Math.round(totalCalories)} kcal</div>
                `;
            }
        }

        // ÊåâËÆ°ÂàíËÆ∞ÂΩïÊú¨È§ê
        function recordMeal(mealType) {
            const mealCard = document.getElementById(mealType + 'Items').closest('.meal-card');
            const foodItems = mealCard.querySelectorAll('.food-item');
            
            if (foodItems.length === 0) return;
            
            currentRecordMeal = mealType;
            const count = foodItems.length;
            document.getElementById('recordMealCount').textContent = count;
            document.getElementById('recordMealConfirmModal').classList.remove('hidden');
        }

        function closeRecordMealConfirmModal() {
            document.getElementById('recordMealConfirmModal').classList.add('hidden');
            currentRecordMeal = null;
        }

        function confirmRecordMeal() {
            if (!currentRecordMeal) return;
            
            const mealCard = document.getElementById(currentRecordMeal + 'Items').closest('.meal-card');
            mealCard.querySelectorAll('.food-item').forEach(item => {
                item.classList.add('recorded', 'bg-emerald-50');
                item.classList.remove('bg-gray-50');
            });
            
            closeRecordMealConfirmModal();
        }

        // Â∑≤ËÆ∞ÂΩïÈ£üÁâ©ÁºñËæëÊèêÁ§∫
        function closeRecordedEditConfirmModal() {
            document.getElementById('recordedEditConfirmModal').classList.add('hidden');
        }

        function confirmRecordedEdit() {
            closeRecordedEditConfirmModal();
            const foodItem = pendingEditBtn.closest('.food-item');
            foodItem.classList.remove('recorded', 'bg-emerald-50');
            foodItem.classList.add('bg-gray-50');
            openEditModal(foodItem);
            pendingEditBtn = null;
        }

        // ÂÖ≥Èó≠ÂºπÊ°ÜÊó∂ÁÇπÂáªËÉåÊôØ
        document.getElementById('editFoodModal').addEventListener('click', function(e) {
            if (e.target === this) closeEditFoodModal();
        });
        document.getElementById('deleteConfirmModal').addEventListener('click', function(e) {
            if (e.target === this) closeDeleteConfirmModal();
        });
        document.getElementById('recordMealConfirmModal').addEventListener('click', function(e) {
            if (e.target === this) closeRecordMealConfirmModal();
        });
        document.getElementById('recordedEditConfirmModal').addEventListener('click', function(e) {
            if (e.target === this) closeRecordedEditConfirmModal();
        });
        document.getElementById('quantityModal').addEventListener('click', function(e) {
            if (e.target === this) closeQuantityModal();
        });

        // Ê∑ªÂä†È£üÁâ©
        function addFoodItem(mealType) {
            currentMealType = mealType;
            showFoodModal();
        }

        // ÊòæÁ§∫È£üÁâ©ÈÄâÊã©Ê®°ÊÄÅÊ°Ü
        function showFoodModal() {
            const modal = document.getElementById('foodModal');
            renderFoodList();
            modal.classList.remove('hidden');
        }

        // Ê∏≤ÊüìÈ£üÁâ©ÂàóË°®
        function renderFoodList(filterText = '') {
            const foodList = document.getElementById('foodList');
            foodList.innerHTML = '';
            
            let filteredFoods = foodDatabase;
            
            // ÊåâÂàÜÁ±ªÁ≠õÈÄâ
            if (currentCategory !== 'all') {
                filteredFoods = filteredFoods.filter(food => food.category === currentCategory);
            }
            
            // ÊåâÊêúÁ¥¢ÊñáÊú¨Á≠õÈÄâ
            if (filterText) {
                filteredFoods = filteredFoods.filter(food => food.name.includes(filterText));
            }
            
            filteredFoods.forEach(food => {
                const foodItem = document.createElement('div');
                foodItem.className = 'p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-emerald-50 transition-colors';
                foodItem.innerHTML = `
                    <div class="flex items-center justify-between mb-2">
                        <div class="font-semibold text-gray-800 text-base">${food.name}</div>
                        <div class="text-lg font-bold text-emerald-600">${food.calories} <span class="text-xs font-normal text-gray-400">kcal</span></div>
                    </div>
                    <div class="flex items-center justify-between text-xs">
                        <span class="text-gray-400">ÊØè${food.unit}</span>
                        <div class="flex items-center gap-3 text-gray-500">
                            <span>üçû ${food.carbs}g</span>
                            <span>ü•© ${food.protein}g</span>
                            <span>ü•ë ${food.fat}g</span>
                        </div>
                    </div>
                `;
                foodItem.onclick = () => selectFood(food);
                foodList.appendChild(foodItem);
            });
        }

        // ÊêúÁ¥¢ËøáÊª§
        function filterFoodList() {
            const searchText = document.getElementById('foodSearchInput').value;
            renderFoodList(searchText);
        }

        // ÂàÜÁ±ªÁ≠õÈÄâ‰∫ã‰ª∂ÁõëÂê¨
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('category-btn')) {
                // Êõ¥Êñ∞ÊåâÈíÆÊ†∑Âºè
                document.querySelectorAll('.category-btn').forEach(btn => {
                    btn.classList.remove('active', 'bg-emerald-100', 'text-emerald-700');
                    btn.classList.add('bg-gray-100', 'text-gray-600');
                });
                e.target.classList.remove('bg-gray-100', 'text-gray-600');
                e.target.classList.add('active', 'bg-emerald-100', 'text-emerald-700');
                
                // Êõ¥Êñ∞ÂΩìÂâçÂàÜÁ±ªÂπ∂ÈáçÊñ∞Ê∏≤Êüì
                currentCategory = e.target.dataset.category;
                const searchText = document.getElementById('foodSearchInput').value;
                renderFoodList(searchText);
            }
        });

        // ÂÖ≥Èó≠È£üÁâ©ÈÄâÊã©Ê®°ÊÄÅÊ°Ü
        function closeFoodModal() {
            const modal = document.getElementById('foodModal');
            modal.classList.add('hidden');
        }

        // ÈÄâÊã©È£üÁâ©
        function selectFood(food) {
            currentFoodItem = food;
            closeFoodModal();
            showQuantityModal(food);
        }

        // ÊòæÁ§∫Êï∞ÈáèËæìÂÖ•Ê®°ÊÄÅÊ°Ü
        function showQuantityModal(food) {
            const modal = document.getElementById('quantityModal');
            document.getElementById('foodName').textContent = food.name;
            document.getElementById('foodQuantity').value = 100;
            
            // ÊòæÁ§∫Ëê•ÂÖªÊàêÂàÜÈ¢ÑËßà
            updateAddPreview(food.name, 100);
            
            modal.classList.remove('hidden');
        }

        // Êõ¥Êñ∞Ê∑ªÂä†È£üÁâ©Êó∂ÁöÑËê•ÂÖªÊàêÂàÜÈ¢ÑËßà
        function updateAddPreview(foodName, quantity) {
            const nutrition = foodNutritionDB[foodName];
            if (!nutrition) return;
            
            const ratio = quantity / 100;
            const carbs = (nutrition.carbs * ratio).toFixed(1);
            const protein = (nutrition.protein * ratio).toFixed(1);
            const fat = (nutrition.fat * ratio).toFixed(1);
            const calories = Math.round(nutrition.calories * ratio);
            
            document.getElementById('addPreviewCarbs').textContent = carbs + 'g';
            document.getElementById('addPreviewProtein').textContent = protein + 'g';
            document.getElementById('addPreviewFat').textContent = fat + 'g';
            document.getElementById('addPreviewCalories').textContent = calories + ' kcal';
        }

        // ÁõëÂê¨Ê∑ªÂä†È£üÁâ©Êó∂ÁöÑÊï∞ÈáèÂèòÂåñ
        document.getElementById('foodQuantity').addEventListener('input', function() {
            const foodName = document.getElementById('foodName').textContent;
            const quantity = parseFloat(this.value) || 0;
            updateAddPreview(foodName, quantity);
        });

        // ÁõëÂê¨Âçï‰ΩçÂèòÂåñ
        document.getElementById('foodUnitSelect').addEventListener('change', function() {
            const unitMap = { 'g': 'g', 'ml': 'ml', 'piece': '‰∏™', 'cup': 'ÊùØ', 'tbsp': 'Âã∫' };
            document.getElementById('foodUnitDisplay').textContent = unitMap[this.value] || 'g';
        });

        // ÂÖ≥Èó≠Êï∞ÈáèËæìÂÖ•Ê®°ÊÄÅÊ°Ü
        function closeQuantityModal() {
            const modal = document.getElementById('quantityModal');
            modal.classList.add('hidden');
        }

        // Á°ÆËÆ§Ê∑ªÂä†È£üÁâ©
        function confirmAddFood() {
            const quantity = parseFloat(document.getElementById('foodQuantity').value);
            const unitSelect = document.getElementById('foodUnitSelect');
            const unitValue = unitSelect.value;
            const unitText = { 'g': 'g', 'ml': 'ml', 'piece': '‰∏™', 'cup': 'ÊùØ', 'tbsp': 'Âã∫' }[unitValue];
            
            if (!quantity || quantity <= 0) {
                alert('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÊï∞Èáè');
                return;
            }
            
            if (!currentFoodItem || !currentMealType) {
                alert('Êï∞ÊçÆÈîôËØØÔºåËØ∑ÈáçËØï');
                return;
            }
            
            // ËÆ°ÁÆóÂÆûÈôÖËê•ÂÖªÂÄº
            const ratio = quantity / 100;
            const actualCalories = Math.round(currentFoodItem.calories * ratio);
            
            // ÂàõÂª∫Êñ∞ÁöÑÈ£üÁâ©È°π
            const foodElement = document.createElement('div');
            foodElement.className = 'food-item flex items-center justify-between p-2 bg-gray-50 rounded-lg';
            foodElement.innerHTML = `
                <div>
                    <div class="font-medium text-gray-800">${currentFoodItem.name}</div>
                    <div class="text-xs text-gray-500">${quantity}${unitText}</div>
                </div>
                <div class="flex items-center space-x-2">
                    <span class="text-sm text-gray-600">${actualCalories} kcal</span>
                    <button class="text-gray-400 hover:text-gray-600" onclick="editFoodItem(this)">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                        </svg>
                    </button>
                    <button class="text-red-400 hover:text-red-600" onclick="deleteFoodItem(this)">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                    </button>
                </div>
            `;
            
            // Ê∑ªÂä†Âà∞ÂØπÂ∫îÁöÑÈ§êÈ£üÂå∫Âüü
            const container = document.getElementById(currentMealType + 'Items');
            container.appendChild(foodElement);
            
            // Êõ¥Êñ∞ÁªüËÆ°
            const mealCard = container.closest('.meal-card');
            updateMealTotal(mealCard);
            updateDailyGoals();
            
            closeQuantityModal();
        }

        // ÂÖ≥Èó≠ÂºπÊ°ÜÊó∂ÁÇπÂáªËÉåÊôØ
        document.getElementById('foodModal').addEventListener('click', function(e) {
            if (e.target === this) closeFoodModal();
        });
    </script>
</body>
</html>