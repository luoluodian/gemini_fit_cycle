# F-4: Food 实体定义 - T6 变更清单

> **变更日期**: 2026-01-31  
> **执行人**: AI Assistant

---

## 1. 变更摘要

本次任务通过对现有 `FoodItem` 实体代码进行合规性审计，正式确立其为食材域的核心数据模型。经检查，现有定义已完全对齐 `04_接口与数据规约.md`。

## 2. 文件确认列表

| 文件路径 | 状态 | 简要说明 |
|:---|:---|:---|
| `fit_cycle_app/src/database/entity/food-item.entity.ts` | 确认 | 字段定义、枚举应用、索引及关联关系配置正确。 |

## 3. 详细逻辑内容

### 3.1 核心字段校验
- [x] **基础信息**: `name` (length 100), `description` (text), `unit` (length 20)。
- [x] **类型控制**: `type` 使用 `FoodType` 枚举，`category` 使用 `FoodCategory` 枚举。
- [x] **营养素精度**: `calories` (int), `protein`/`fat`/`carbs` (decimal 8,2)。
- [x] **关联关系**: `userId` 关联 `User` 实体，支持 `onDelete: 'SET NULL'`。

### 3.2 数据库索引
- [x] `idx_name`: 加速食材名称搜索。
- [x] `idx_category`: 加速按分类筛选。

### 3.3 生命周期管理
- [x] 集成了 `CreateDateColumn`, `UpdateDateColumn` 和 `DeleteDateColumn` (软删除支持)。

## 4. 验证计划

1.  **构建验证**: 运行 `npm run build` 确保实体元数据加载正常。
2.  **单元测试**: (已在 F-2/F-3 的 Service 测试中通过引用间接验证)。
