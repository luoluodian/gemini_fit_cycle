# 环境上下文简报

> **版本**: 1.0  
> **日期**: 2026-01-27  
> **撰写人**: Gemini AI Assistant

## 1. 技术环境快照

### 1.1 后端 (fit_cycle_app)

-   **核心框架**: NestJS `^11.1.9`
-   **语言**: TypeScript `^5.9.3`
-   **数据库 ORM**: TypeORM `^0.3.27` (配合 `mysql2 ^3.15.3`)
-   **缓存**: Redis (`ioredis ^5.8.2`)
-   **认证**: JWT (`@nestjs/jwt ^11.0.1`, `passport-jwt ^4.0.1`)
-   **日志**: Winston (`winston ^3.18.3`, `nest-winston ^1.10.2`)
-   **验证**: `class-validator ^0.14.2`, `class-transformer ^0.5.1`
-   **Node.js 要求**: `>= 18.0.0`
-   **包管理器**: Yarn `>= 1.22.0`

### 1.2 前端 (fit_cycle_web)

-   **核心框架**: Taro `4.1.9` + Vue 3 `^3.2.24`
-   **语言**: TypeScript `^5.1.0` (开发依赖)
-   **状态管理**: Pinia `^2.0.10`
-   **UI 组件库**: NutUI Taro `^4.2.8`
-   **样式**: Tailwind CSS `^3.4.19` (通过 `weapp-tailwindcss ^4.9.2` 适配), Sass `^1.60.0`
-   **构建工具**: Vite `^4.2.0`
-   **支持平台**: 微信小程序, H5
-   **Node.js 要求**: `>= 18.0.0`
-   **包管理器**: Yarn `>= 1.22.0`

## 2. 全局规范摘要

### 2.1 代码风格

-   遵循 ESLint 和 Prettier 配置。
-   TypeScript 严格模式。

### 2.2 命名规范

-   **变量/函数**: `camelCase` (驼峰命名)
-   **类/接口**: `PascalCase` (大驼峰命名)
-   **常量**: `UPPER_SNAKE_CASE` (大写下划线)
-   **文件名**:
    -   **后端**: `kebab-case` (短横线命名)，如 `user.service.ts`
    -   **前端**: `PascalCase` (大驼峰命名)，如 `UserProfile.vue`

### 2.3 注释规范

-   公共函数和类必须添加 JSDoc 注释。
-   复杂业务逻辑必须添加行内注释。
-   注释使用中文，清晰说明代码意图。

### 2.4 Git 提交规范

-   格式: `<type>(<scope>): <subject>` (e.g., `feat(backend): 添加用户登录接口`)
-   `type` 可选: `feat`, `fix`, `docs`, `style`, `refactor`, `test`, `chore`。

## 3. 视觉资产清单 (`html/` 目录)

`html/` 目录提供了前端页面的静态原型和样式参考，是 UI 开发的重要基准。

-   **登录页面**: `login.html`
    -   对应业务功能: 用户认证、隐私政策展示。
-   **首页/记录页面**: `index.html`, `daily-list.html`
    -   对应业务功能: 每日饮食记录、日期导航、计划信息显示、营养目标概览。
-   **食物相关页面**: `food.html`, `food-selector-embedded.html`
    -   对应业务功能: 食物详情、食物选择模块。
-   **计划管理页面**: `plan.html`, `daily-plan.html`, `new-plan.html`, `plan-creator.html`
    -   对应业务功能: 计划列表、创建计划、计划详情。
-   **个人资料页面**: `profile.html`
    -   对应业务功能: 用户个人信息展示。
-   **其他**: `design.md`, `interaction.md`, `outline.md`, `optimization-plan.md`, `test.html` (辅助文档和测试页)。
-   **图片资产**: `food-ingredients.png`, `hero-image.png`, `meal-prep.png`, `nutrition-concept.png` (视觉元素参考)。
-   **样式提示**: `html/` 目录中的文件可能直接使用了 Tailwind CSS 类名或嵌入了原生 CSS 来实现设计效果。前端开发时应遵循 `项目技术栈.md` 和 `编码规范.md` 中定义的 Tailwind CSS 和 Sass 使用策略。

## 4. 上下文加载确认

-   已成功读取并分析 `docs/init_docs/` 目录下的所有初始化文档 (`编码规范.md`, `项目技术栈.md`, `页面功能详细说明文档.md`)。
-   已成功读取并分析 `fit_cycle_app/package.json` 和 `fit_cycle_web/package.json`，提取了详细的技术栈版本信息。
-   已成功列出并审查 `html/` 目录下的所有文件，建立了视觉资产和业务功能的初步映射。
-   **冲突检测**: 在现有文档中未发现相互冲突的核心规范或技术栈定义。环境上下文已成功对齐，可以安全地进行后续业务分析和设计任务。
