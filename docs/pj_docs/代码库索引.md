# 项目代码库索引

> **最后更新**: 2026-01-28
> **版本**: 1.0

## 1. 后端 (fit_cycle_app)

### 1.1 核心模块 (Modules)
- `AuthModule`: `src/modules/auth/auth.module.ts` - 认证与授权管理。
- `UserModule`: `src/modules/user/user.module.ts` - 用户基本信息与档案管理。
- `FoodModule`: `src/modules/food/food.module.ts` - 核心食物库管理。
- `DietLogsModule`: `src/modules/diet-logs/diet-logs.module.ts` - 饮食记录追踪。
- `DietPlansModule`: `src/modules/diet-plans/diet-plans.module.ts` - 饮食计划制定。
- `DictModule`: `src/modules/dict/dict.module.ts` - 数据字典服务。
- `FoodItemModule`: `src/modules/food-items/food-items.module.ts` - 食物细项管理。
- `TodayDietModule`: `src/modules/today-diet/today-diet.module.ts` - 今日饮食概览（待完善）。
- `ShareModule`: `src/modules/share/share.module.ts` - 计划分享与社交。
- `RedisModule`: `src/redis/redis.module.ts` - 缓存服务。
- `DatabaseModule`: `src/database/database.module.ts` - 数据库连接配置。

### 1.2 控制器 (Controllers)
- `AuthController`: `src/modules/auth/auth.controller.ts`
- `UserController`: `src/modules/user/user.controller.ts`
- `FoodController`: `src/modules/food/food.controller.ts`
- `DietLogsController`: `src/modules/diet-logs/diet-logs.controller.ts`
- `DietPlansController`: `src/modules/diet-plans/diet-plans.controller.ts`
- `DictController`: `src/modules/dict/dict.controller.ts`
- `FoodItemsController`: `src/modules/food-items/food-items.controller.ts`
- `ShareController`: `src/modules/share/share.controller.ts`

### 1.3 服务层 (Services)
- `AuthService`: `src/modules/auth/auth.service.ts`
- `UserService`: `src/modules/user/user.service.ts`
- `FoodService`: `src/modules/food/food.service.ts`
- `DietLogsService`: `src/modules/diet-logs/diet-logs.service.ts`
- `DietPlansService`: `src/modules/diet-plans/diet-plans.service.ts`
- `DictService`: `src/modules/dict/dict.service.ts`
- `RedisService`: `src/redis/redis.service.ts`

### 1.4 数据实体 (Entities)
- `User`: `src/database/entity/user.entity.ts`
- `Food`: `src/database/entity/food.entity.ts`
- `DietLog`: `src/database/entity/diet-log.entity.ts`
- `DietPlan`: `src/database/entity/diet-plan.entity.ts`
- `PlanDay`: `src/database/entity/plan-day.entity.ts`
- `PlanMeal`: `src/database/entity/plan-meal.entity.ts`
- `DataDictionary`: `src/database/entity/data-dictionary.entity.ts`
- `WeightRecord`: `src/database/entity/weight-record.entity.ts`
- `DailyGoal`: `src/database/entity/daily-goal.entity.ts`

### 1.5 数据传输对象 (DTOs)
- `WechatAuthDto`: `src/dtos/user.dto.ts`
- `AuthResponseDto`: `src/dtos/auth-response.dto.ts`
- `CreateDietLogDto`: `src/dtos/create-diet-log.dto.ts`
- `CreateDietPlanDto`: `src/dtos/create-diet-plan.dto.ts`
- `FoodDto`: `src/dtos/food.dto.ts`

### 1.6 公共工具与拦截器 (Common)
- `HttpExceptionFilter`: `src/common/filters/http-exception.filter.ts`
- `TransformInterceptor`: `src/common/interceptors/transform.interceptor.ts`
- `TrimInterceptor`: `src/common/interceptors/trim.interceptor.ts` (已修复 read-only 报错)
- `AppLogger`: `src/common/logger/app.logger.ts`
- `UserTransformer`: `src/common/transformers/user.transformer.ts`

---

## 2. 前端 (fit_cycle_web)

### 2.1 页面视图 (Pages)
- `Login`: `src/pages/login/index.vue` - 登录入口。
- `Home`: `src/pages/index/index.vue` - 今日饮食概览。
- `PlanOverview`: `src/pages/plan/index.vue` - 饮食计划列表。
- `PlanCreator`: `src/pages/plan-creator/index.vue` - 计划制定向导。
- `DailyList`: `src/pages/daily-list/index.vue` - 饮食日志日历流。
- `DailyPlan`: `src/pages/daily-plan/index.vue` - 每日计划详情。
- `FoodLibrary`: `src/pages/food/index.vue` - 食物搜索与库。
- `Profile`: `src/pages/profile/index.vue` - 个人中心。

### 2.2 公共组件 (Common Components)
- `BaseButton`: `src/components/common/BaseButton.vue` - 原子按钮。
- `BaseCard`: `src/components/common/BaseCard.vue`
- `BaseModal`: `src/components/common/BaseModal.vue`
- `GlassCard`: `src/components/common/GlassCard.vue` - 毛玻璃卡片。
- `PageHeader`: `src/components/common/PageHeader.vue`
- `ErrorMessage`: `src/components/common/ErrorMessage.vue`

### 2.3 业务组件 (Business Components)
- **Login**: `LoginButton`, `LogoHeader`, `WelcomeCard`, `PrivacyModal`
- **Plan**: `PlanCard`, `PlanStats`, `RecommendedPlans`, `StepIndicator`
- **Food**: `FoodCard`, `SearchBar`, `CategoryTabs`, `RecentlyUsed`
- **Daily**: `DayCard`, `MealCard`, `NutritionTargets`, `DateNavigation`

### 2.4 状态管理 (Stores)
- `userStore`: `src/stores/user.ts` - 认证与用户信息存储。
- `counterStore`: `src/stores/counter.ts` - 示例计数。

### 2.5 服务层 (Services)
- `HttpService`: `src/services/http/index.ts` - 拦截器、Token 自动刷新。
- `AuthService`: `src/services/modules/auth.ts` - 登录接口。
- `UserService`: `src/services/modules/user.ts` - 用户档案。
- `RecordService`: `src/services/modules/record.ts` - 饮食记录。
- `PlanService`: `src/services/modules/plan.ts` - 计划管理。

### 2.6 路由管理 (Router)
- `RouterWrapper`: `src/router/index.ts` - 封装路由守卫 (U-5 已交付)。
- `RouteConstants`: `src/constants/routes.ts` - 页面路径与白名单。
