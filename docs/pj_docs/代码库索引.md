# 项目代码库索引

本文档提供了项目结构的完整索引，涵盖后端、前端、原始 UI 及文档资产。

## 1. 后端架构 (`fit_cycle_app/`)
基于 NestJS (v11.1.9) + TypeScript。

### 1.1 核心配置
- `fit_cycle_app/src/main.ts`: 应用入口。
- `fit_cycle_app/src/app.module.ts`: 根模块。
- `fit_cycle_app/package.json`: 依赖定义。
- `fit_cycle_app/tsconfig.json`: TS 配置。

### 1.2 功能模块 (`src/modules/`)
- `auth/`: 用户认证（JWT/Passport）。
- `user/`: 用户档案与健康数据。
- `diet-plans/`: 饮食计划管理。
- `diet-logs/`: 饮食记录日志。
- `food/`: 食材库。
- `food-items/`: 具体食物项。
- `today-diet/`: 今日饮食统计逻辑（暂未启用）。
- `dict/`: 字典表。
- `share/`: 计划分享逻辑。

### 1.3 数据层
- `fit_cycle_app/src/database/entity/`: TypeORM 实体定义。
- `fit_cycle_app/src/database/migrations/`: 数据库迁移脚本。
- `fit_cycle_app/src/database/data-source.ts`: 数据库连接配置。
- `fit_cycle_app/src/redis/`: Redis 缓存服务。

### 1.4 传输层 (`src/dtos/`)
- 包含所有请求与响应的数据传输对象（DTO）。

### 1.5 通用与配置 (`src/common/` & `src/config/`)
- `common/`: 包含全局拦截器、异常过滤器、日志模块、数据转换器及工具类。
- `config/`: 应用程序环境配置模块。

### 1.6 测试 (`test/`)
- 包含端到端 (E2E) 测试用例（如 `app.e2e-spec.ts`, `auth.e2e-spec.ts`）。

---

## 2. 前端架构 (`fit_cycle_web/`)
基于 Taro (v4.1.9) + Vue 3。

### 2.1 核心配置
- `fit_cycle_web/src/app.ts`: 应用入口。
- `fit_cycle_web/src/app.config.ts`: Taro 全局路由与窗口配置。
- `fit_cycle_web/tailwind.config.js`: Tailwind CSS 配置。

### 2.2 视图与组件
- `fit_cycle_web/src/pages/`: 页面路由组件。
- `fit_cycle_web/src/components/`:
  - `common/`: 通用基础组件（按钮、弹窗、导航栏等）。
  - `login/`: 登录相关组件。
  - `home/`: 首页/记录相关组件。
  - `plan/`: 计划列表相关组件。
  - `plan-creator/`: 计划创建向导组件。
  - `daily-list/`: 每日计划列表组件。
  - `daily-plan/`: 每日计划详情组件。
  - `food/`: 食材库相关组件。
  - `profile/`: 个人中心相关组件。
- `fit_cycle_web/src/custom-tab-bar/`: 自定义 TabBar 组件（Taro 特性）。

### 2.3 状态与服务
- `fit_cycle_web/src/stores/`: Pinia 状态管理（User, Navigation等）。
- `fit_cycle_web/src/services/`: API 请求封装及业务模块服务。
- `fit_cycle_web/src/constants/`: 常量定义（API 地址、错误码、路由名）。
- `fit_cycle_web/src/utils/`: 工具函数（请求拦截器、格式化、环境判断等）。

### 2.4 类型定义 (`types/`)
- `fit_cycle_web/types/`: 全局类型定义（如 `global.d.ts`, `vue.d.ts`）。

---

## 3. 原始 UI 参考 (`html/`)
包含项目初期的静态 HTML 原型，作为 UI 还原的唯一真理。

- `html/index.html`: 主页记录原型。
- `html/login.html`: 登录页原型。
- `html/plan.html`: 计划列表原型。
- `html/new-plan.html`: 创建计划步骤一。
- `html/carb-cycle-setup.html`: 碳循环设置。
- `html/plan-templates.html`: 日模板配置。
- `html/food.html`: 食材库。
- `html/profile.html`: 个人中心。
- `html/daily-list.html`: 每日列表原型。
- `html/daily-plan.html`: 每日计划详情原型。
- `html/meal-config.html`: 餐次配置原型。
- `html/edit-template.html`: 模板编辑原型。

---

## 4. 项目文档 (`docs/`)

### 4.1 原始需求 (`docs/init_docs/`)
- `饮食计划小程序需求.md`: 原始产品定义。
- `业务逻辑文档.md`: 核心计算规则。

### 4.2 执行方案 (`docs/pj_docs/`)
- `01_需求模块化方案.md`: 业务域划分。
- `02_需求原子化拆分.md`: 任务列表。
- `03_系统架构设计方案.md`: 技术架构。
- `04_接口与数据规约.md`: API 与 DB 设计。
- `04.5_原子任务交付看板.md`: 进度追踪。

---

## 5. 辅助工具
- `package.json`: 根目录依赖管理。
- `任务清单.md`: 原子任务细节追踪。