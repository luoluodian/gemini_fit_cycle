# 项目代码库索引

> **最后更新**: 2026-01-28
> **版本**: 1.2 (同步 Food 接口重构与全局导航 C-2, C-3 交付)

## 1. 后端 (fit_cycle_app)

### 1.1 核心模块 (Modules)
- `FoodModule`: `src/modules/food/food.module.ts` - 核心食物库管理（已适配高精度字段）。
- `DictModule`: `src/modules/dict/dict.module.ts` - 支撑全站下拉选项的数据字典。

### 1.2 控制器 (Controllers)
- `FoodController`: `src/modules/food/food.controller.ts` 
    - `GET /food`: 列表与模糊搜索。
    - `GET /food/:id`: 获取详情。
    - `POST /food`: 创建（含重复检查）。
    - `PUT /food/:id`: 局部更新。

### 1.3 服务层 (Services)
- `FoodService`: `src/modules/food/food.service.ts` - **重构**: 统一使用 `calories_per_100g` 等标准化列名，引入 `NotFoundException` 规范 404 处理。

### 1.4 数据库产物 (DB Assets)
- `Initial Schema`: `src/database/migrations/initial-schema.sql` - **升级**: 食物表补全 `gi`, `image_url` 等字段。
- `Seed Data`: `src/database/migrations/seed-food.sql` - **新建**: 22 种核心食材初始数据脚本。

### 1.5 数据传输对象 (DTOs)
- `FoodDto`: `src/dtos/food.dto.ts` - **重构**: 完全对齐 Entity 的驼峰命名，添加 `@Transform` 强制数值转换。

---

## 2. 前端 (fit_cycle_web)

### 2.1 页面视图 (Pages)
- `Index (记录)`: `src/pages/index/index.vue` - 集成 `BaseNavBar` 与 Tab 同步。
- `Profile (我的)`: `src/pages/profile/index.vue` - 集成沉浸式 NavBar。
- `Food (食材)`: `src/pages/food/index.vue` - 基础框架已建立。

### 2.2 全局导航 (Navigation) - **新交付**
- **TabBar**: `src/custom-tab-bar/`
    - `index.js/wxml/wxss`: 原生微信自定义导航栏实现，支持毛玻璃与 SVG。
- **NavBar**: `src/components/common/BaseNavBar.vue`
    - 通用沉浸式顶通，支持动态计算胶囊按钮对齐。

### 2.3 公共组件 (Common Components)
- `BaseButton`: `src/components/common/BaseButton.vue` - 增强型按钮。
- `BaseModal`: `src/components/common/BaseModal.vue` - 统一弹窗。
- `MenuItem`: `src/components/common/MenuItem.vue` - 精致列表项。

### 2.4 状态管理 (Stores)
- `navigationStore`: `src/stores/navigation.ts` - **新**: 管理全站导航索引同步。
- `userStore`: `src/stores/user.ts` - 用户认证状态。

### 2.5 静态资源 (Assets)
- `Tabs Icons`: `src/static/tabs/` - 底部导航栏占位图标。

### 2.6 全局配置 (Config)
- `App Config`: `src/app.config.ts` - 配置 `custom: true` 导航与全局 `navigationStyle`。
- `App Styles`: `src/app.scss` - 注入了 TabBar 遮挡修复样式 (`pb-safe`)。
