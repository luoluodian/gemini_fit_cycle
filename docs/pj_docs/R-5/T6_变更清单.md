# T6 变更清单: R-5 餐次卡片组件 (智能复用版)

## 1. 底层 UI 资产升级 (Base Asset Upgrade)

### 1.1 更新 `FoodItemCard.vue`
- **新增属性**: 
    - `isSnapshot: boolean` (默认 false)。
- **逻辑重构**:
    - `displayNutrition` 计算属性增加分支判断：
        - `if (isSnapshot)`: 直接返回 `food.calories`, `food.protein` 等快照值。
        - `else`: 维持原有的 `base * ratio` 计算逻辑。
- **收益**: 确保 UI 样式 100% 统一，且消除首页渲染时的精度误差与性能损耗。

### 1.2 精简 `FoodItemAdapter.vue`
- **代码修剪**: 
    - 彻底移除 `adaptedFood` 计算属性中的“反推/除法”算法。
    - 直接将 `props.food` 传递给 `FoodItemCard` 并开启 `is-snapshot` 模式。

## 2. 业务组件对齐 (Business Logic Alignment)

### 2.1 更新 `HomeMealCard.vue`
- **Props 对齐**: 接收 `title`, `mealType`, `meals` (MealLog[])。
- **删除流闭环**: 
    - 对接 `removeMealLog` API。
    - 实现 `Taro.showModal` 二次确认。
    - 删除成功后触发父组件 `refresh` 事件。

## 3. 验证计划 (Verification)
- **UI 一致性**: 验证首页记录项与食材库搜索项在圆角、阴影、字体大小上完全一致。
- **数据精度**: 验证后端返回 370kcal 时，前端显示的数值也是 370kcal (无浮点数漂移)。
- **并发防御**: 快速连续点击删除，验证是否仅弹出一次确认框。

## 4. 结论 (Conclusion)
本方案通过对底层组件的“模式扩展”，实现了高质量的代码复用。既满足了 UI 统一的需求，又通过逻辑解耦保证了 V7 全链路持久化数据的纯净性。