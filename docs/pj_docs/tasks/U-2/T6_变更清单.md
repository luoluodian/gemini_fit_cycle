# U-2: 封装前端认证服务 - T6 变更清单

## 6.1 新建文件
- `fit_cycle_web/src/constants/storage.ts`: 定义本地存储键名常量。
- `fit_cycle_web/src/services/http.ts`: 封装 Taro.request，实现请求拦截（注入 Token）、响应拦截（统一错误处理、401 自动登出）及 Loading 状态管理。
- `fit_cycle_web/src/services/modules/auth.ts`: 封装后端 `/auth/wechatAuth` 接口调用。
- `fit_cycle_web/src/stores/user.ts`: 定义用户状态 Store (Pinia)，实现登录 (`login`)、登出 (`logout`) 及状态持久化逻辑。

## 6.2 修改文件
- `fit_cycle_web/src/services/http.ts`: (Deleted redundant file, pointing to index.ts)

## 6.3 新增依赖
- 无。

## 6.4 环境变量变更
- 无。

## 6.6 完整性检查结果

### 【导入语句检查】
- [x] 所有导入的组件都已创建？ (N/A, Service task)
- [x] 所有导入的 Store 都存在？ (`useUserStore` created)
- [x] 所有导入的 Service 都存在？ (`httpRequest` from `services/http` verified)
- [x] 所有导入的工具函数都存在？ (`getStorage`, `setStorage` verified)

### 【类型定义检查】
- [x] 所有 Props 类型都已定义？ (N/A)
- [x] 所有 Emits 类型都已定义？ (N/A)
- [x] 所有接口都已声明？ (`AuthResponse`, `UserInfo` declared)

### 【路由配置检查】
- [x] 路由是否已添加到 router/index.ts？ (N/A, login page logic handled via reLaunch)
- [x] 路由守卫是否已应用？ (Token check logic prepared in interceptor)
- [x] 路由路径是否正确？ (`/pages/login/index` matches file structure)

### 【Store 检查】
- [x] State 是否已定义？ (`accessToken`, `userInfo` defined)
- [x] Actions 是否已实现？ (`login`, `logout` implemented)
- [x] Getters 是否已实现？ (`isLoggedIn` implemented)

### 【UI 还原度检查】
- N/A (Service task)

### 【响应式检查】
- N/A (Service task)
