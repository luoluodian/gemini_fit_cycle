# U-9: User 表设计 - T6 变更清单

## 6.1 修改文件

- `fit_cycle_app/src/database/migrations/initial-schema.sql`:
    - 修正了 `users` 表的字段命名，将 `openid` 统一为 `open_id` 以匹配 Entity 定义。
    - 统一了字典关联字段名（添加 `_id` 后缀）。
    - 补充了 `date_of_birth` 和 `refresh_token` 字段。
    - 补全了 `weight_records`, `daily_checkins`, `exercise_logs` 表的定义及 Foreign Key 约束，确保与 `User` 实体的关系映射闭环。

## 6.2 完整性检查结果

### 【字段一致性检查】
- [x] Entity `@Column({ name: 'open_id' })` 与 SQL `open_id` 匹配。
- [x] Entity `gender_id`, `activity_level_id`, `goal_type_id` 与 SQL 字段名匹配。
- [x] 数据类型 `DECIMAL(5,2)` 在 Entity 和 SQL 中保持一致。

### 【关联完整性检查】
- [x] `User` 实体的所有 `@OneToMany` 关系在 SQL 中都有对应的子表。
- [x] 所有子表均配置了 `FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE`。

### 【构建验证】
- [x] 后端 `npm run build` 通过（确保 Entity 语法无误）。
