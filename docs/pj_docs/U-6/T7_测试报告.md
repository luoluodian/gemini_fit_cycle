# U-6: BMR 计算逻辑 - T7 测试报告

> **测试日期**: 2026-01-31  
> **测试人**: AI Assistant  
> **环境**: 本地开发环境 (Jest)

---

## 1. 测试概览

本次测试主要验证 `UserService` 中的 `calculateHealthMetrics` 逻辑是否准确实现了 Mifflin-St Jeor 公式，并正确处理了性别和活动水平差异。

## 2. 测试用例

| 用例 ID | 测试场景 | 预期结果 | 实际结果 | 状态 |
|:---|:---|:---|:---|:---|
| TC-U6-001 | 男性 BMR 计算 | 根据公式计算出正确的 BMR 和 TDEE | 与预期一致 (四舍五入) | Pass |
| TC-U6-002 | 女性 BMR 计算 | 根据公式计算出正确的 BMR 和 TDEE | 与预期一致 (四舍五入) | Pass |
| TC-U6-003 | 年龄提取逻辑 | 正确提取年份差作为年龄 | 提取正确 | Pass |
| TC-U6-004 | 精度处理 | 确保计算过程中 `decimal` 字段被正确转为 `number` | 计算无误 | Pass |

## 3. 测试结论

- 核心计算逻辑通过单元测试验证。
- 公式参数（男+5 / 女-161）实现正确。
- TDEE 计算与活动系数映射关系正确。
- 逻辑具备交付条件。
