# T6 变更清单: I-4.5 计划占位与变色逻辑

## 1. 底层 UI 资产增强 (UI Assets)

### 1.1 更新 `FoodItemCard.vue`
- **新增 Props**: 
    - `status`: `'ghost' | 'completed' | 'custom'` (默认 'custom')。
- **视觉逻辑**:
    - `ghost`: 增加 `opacity-60 grayscale border-dashed bg-gray-50` 类。
    - `completed`: 增加 `bg-emerald-50 border-emerald-100` 类，名称颜色设为 `text-emerald-700`。
- **交互控制**: 
    - 为 `ghost` 状态增加特殊点击反馈，引导至记录确认弹窗。

## 2. 状态机逻辑扩展 (Store Logic)

### 2.1 更新 `planStore.ts`
- **新增 Action `getTemplateByDate(date: string)`**:
    - 逻辑: 内部封装日期差计算，返回该日期对应的 `PlanDay` 模板。
    - 收益: 让首页卡片能快速感知“今日计划是什么”。

## 3. 业务组件合并重构 (Component Logic)

### 3.1 更新 `HomeMealCard.vue`
- **实现 `mergedMeals` 计算属性**:
    1. 获取 `recordStore.mealLogs` (真实记录)。
    2. 获取 `planStore.getTemplateByDate(props.date)` (计划推荐)。
    3. **差分逻辑**:
        - 遍历“计划项”:
            - 若在“真实记录”中找到 `foodId` 且 `isPlanned === true` -> 标记为 `completed`。
            - 否则 -> 标记为 `ghost`。
        - 补充“真实记录”中所有 `isPlanned !== true` 的项 -> 标记为 `custom`。
- **模板渲染**: `v-for="item in mergedMeals"`。

## 4. 验证计划 (Verification)

- **三态转换测试**:
    - [ ] 初始状态: 看到灰色虚线的“幽灵”食物。
    - [ ] 点击记录: 验证该项瞬间变为“浅绿色”实态食物。
    - [ ] 手动加餐: 验证新加的食物显示为标准白色，不干扰计划项。
- **跨天同步测试**:
    - [ ] 左右滑动日期，验证“幽灵项”是否随日期（即计划天数）的改变而正确刷新。

## 5. 结论
I-4.3 解决了“数据存哪”的问题，I-4.5 则解决了“数据怎么看”的问题。通过三态逻辑，我们正式实现了饮食计划的“可视化执行”。
