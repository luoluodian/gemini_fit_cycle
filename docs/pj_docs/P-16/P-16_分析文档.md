# P-16: 周期模板管理 UI - 分析文档

> **任务 ID**: P-16
> **优先级**: P0 (MVP 核心流程)
> **依赖**: P-6 (创建向导基础信息)

## 1. 业务目标
实现创建饮食计划过程中的第二步：周期内每日模板的管理。允许用户在正式保存计划前，灵活调整每一天的顺序、复制成熟配置，确保计划结构的科学性。

## 2. 核心功能拆解 (基于原型 plan-templates.html)

### 2.1 模板列表展示
- 展示周期内所有天数 (Day 1, Day 2...)。
- 显示每项的配置状态（已配置/未配置）。
- 关联碳循环阶段（如果是该类型计划）。

### 2.2 列表管理交互
- **拖拽排序**: 允许用户通过 Drag Handle 调整天数顺序。
- **克隆/复制**: 一键复制某日的配置到列表末尾。
- **删除**: 移除特定的日模板，后续天数自动补位。
- **新增**: 当模板数小于周期数时，允许手动添加。

### 2.3 状态同步
- 实时计算“已配置/总天数”进度。
- 汇总展示各阶段（高/中/低碳）的天数分布。

## 3. 技术实现方案

### 3.1 跨端拖拽实现
- **小程序端**: 由于 DOM 限制，采用“长按激活+TouchMove”模拟拖拽，或使用 `movable-area`。
- **H5 端**: 使用 CSS `transition` 配合位置交换逻辑。

### 3.2 路由集成
- 该页面作为 `plan-creator/index.vue` 的 Step 2 嵌入。
- 通过 Props 接收 P-6 收集的基础数据。

## 4. 验收标准
- [ ] 列表能够根据 P-6 设定的周期天数正确初始化。
- [ ] 点击卡片能够正确传递参数并进入 P-9 详情编辑。
- [ ] 复制/删除功能逻辑闭环，且实时更新统计数据。
- [ ] 拖拽排序效果平滑，数据索引更新正确。
