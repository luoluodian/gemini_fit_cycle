# U-5: 个人中心页 UI - T6 变更清单

> **变更日期**: 2026-01-31  
> **执行人**: AI Assistant

---

## 1. 变更摘要

本次变更主要完成个人中心页面的数据绑定和 UI 逻辑完善。
核心工作是将前端 Mock 数据替换为对接 `UserStore` 和 `UserService` 的真实数据（或预留接口）。

## 2. 文件变更列表

### 修改文件

| 文件路径 | 变更类型 | 简要说明 |
|:---|:---|:---|
| `fit_cycle_web/src/services/modules/user.ts` | 修改 | 新增 `getUserProfile` 接口及 `HealthProfile`, `UserStats` 类型定义。 |
| `fit_cycle_web/src/stores/user.ts` | 修改 | State 新增 `health`, `stats` 字段；Action 新增 `fetchUserProfile`。 |
| `fit_cycle_web/src/pages/profile/index.vue` | 修改 | `useDidShow` 调用 `fetchUserProfile`；UI 绑定 Store 数据。 |

## 3. 详细变更内容

### 3.1 `fit_cycle_web/src/services/modules/user.ts`

- **新增类型**:
  - `HealthProfile`: 定义健康档案数据结构。
  - `UserStats`: 定义用户统计数据结构。
  - `UserProfileResponse`: 复合响应类型。
- **新增方法**:
  - `getUserProfile()`: 调用 `GET /user/profile`。

### 3.2 `fit_cycle_web/src/stores/user.ts`

- **State 变更**:
  - `healthProfile`: `HealthProfile | null`
  - `stats`: `UserStats | null`
- **Actions 变更**:
  - `fetchUserProfile()`: 异步获取并更新 State。

### 3.3 `fit_cycle_web/src/pages/profile/index.vue`

- **逻辑变更**:
  - 引入 `useDidShow` 生命周期。
  - 检查登录状态并获取 Profile。
  - 使用 `computed` 将 Store 数据映射到 `userData`。

## 4. 验证计划

1.  **编译检查**: 运行 `npm run build:weapp` 确保无类型错误。
2.  **Mock 验证**: 由于后端接口可能未就绪，可临时 Mock `getUserProfile` 的返回值进行 UI 验证。
