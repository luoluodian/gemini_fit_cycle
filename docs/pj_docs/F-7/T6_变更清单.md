# F-7: 食材搜索组件 - T6 变更清单

> **变更日期**: 2026-01-31  
> **执行人**: AI Assistant

---

## 1. 变更摘要

本次任务完成了可复用的食材搜索弹窗组件 `FoodSelectorModal.vue`。该组件整合了关键词搜索、分类筛选以及无限滚动加载功能，并与后端 `F-2` 接口完成了对接。

## 2. 文件变更列表

### 新增文件

| 文件路径 | 变更类型 | 说明 |
|:---|:---|:---|
| `fit_cycle_web/src/services/modules/food.ts` | 新增 | 封装食材相关 API 调用（搜索、详情、同步）。 |
| `fit_cycle_web/src/components/food/FoodSelectorModal.vue` | 新增 | 核心弹窗组件，包含搜索、分类及结果展示。 |

### 修改文件

| 文件路径 | 变更类型 | 说明 |
|:---|:---|:---|
| `fit_cycle_web/package.json` | 修改 | 添加 `lodash-es` 依赖用于防抖处理。 |

## 3. 详细变更内容

### 3.1 前端 Service (`food.ts`)
- [x] 定义 `FoodItem` 接口，对齐后端模型。
- [x] 封装 `searchFoodItems` 方法，支持 `q`, `category`, `page`, `pageSize` 参数。

### 3.2 搜索组件 (`FoodSelectorModal.vue`)
- [x] **布局**: 底部半屏弹窗风格，支持移动端手势。
- [x] **搜索**: 集成输入框，使用 `lodash-es/debounce` 延迟 500ms 触发搜索，减少接口压力。
- [x] **筛选**: 提供横向滚动的分类 Tab 切换。
- [x] **列表**: 使用 `ScrollView` 实现，支持触底自动加载更多 (`@scrolltolower`)。
- [x] **事件**: 选中食材后抛出 `select` 事件并携带食材完整对象。

## 4. 验证计划

1.  **构建验证**: 运行 `npm run build:weapp` 确保无 TS 错误。
2.  **逻辑验证**:
    - 验证输入关键词后是否触发 API 请求。
    - 验证切换分类后是否重置分页并刷新列表。
    - 验证触底后是否加载下一页数据。
