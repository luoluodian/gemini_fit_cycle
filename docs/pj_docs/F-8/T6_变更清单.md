# F-8: 创建食材 UI - T6 变更清单

> **变更日期**: 2026-01-31  
> **执行人**: AI Assistant

---

## 1. 变更摘要

本次任务大幅增强了 `CustomFoodModal.vue` 组件，将其从一个简易表单重构为功能完备、视觉精美的食材创建/编辑中心。同时，补全了前端 `FoodService` 中缺失的增删改 API。

## 2. 文件变更列表

### 新增文件

| 文件路径 | 说明 |
|:---|:---|
| `fit_cycle_web/src/services/modules/food.ts` | (在 F-7 阶段创建) 补全了 `createFoodItem` 和 `updateFoodItem` 方法。 |

### 修改文件

| 文件路径 | 变更类型 | 说明 |
|:---|:---|:---|
| `fit_cycle_web/src/components/food/CustomFoodModal.vue` | 重构 | 实现了完整的 UI 布局、数据回显及异步提交逻辑。 |

## 3. 详细变更内容

### 3.1 `CustomFoodModal` UI 增强
- [x] **Emoji 选择器**: 集成了常用食材图标点击选择。
- [x] **分类标签组**: 支持 7 种营养分类选择，并带有视觉颜色反馈。
- [x] **营养素看板**: 采用渐变卡片布局，包含热量、蛋白、脂肪、碳水四个维度。
- [x] **公开/私有切换**: 集成了微信风格的 `Switch` 组件。

### 3.2 业务逻辑集成
- [x] **模式切换**: 通过 `props.editingFood` 自动切换“创建”或“编辑”模式。
- [x] **表单重置**: 弹窗关闭时自动重置所有响应式状态。
- [x] **数据持久化**: 提交后调用后端 API 并触发父页面列表刷新。

## 4. 验证计划

1.  **编译验证**: 运行 `npm run build:weapp` 已成功。
2.  **交互验证**: 
    -   打开弹窗，输入“测试食材”。
    -   选择图标和分类。
    -   点击“立即创建”，观察是否弹出“创建成功”提示。
